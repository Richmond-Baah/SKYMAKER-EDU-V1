"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/submissions/[code]/route";
exports.ids = ["app/api/submissions/[code]/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsubmissions%2F%5Bcode%5D%2Froute&page=%2Fapi%2Fsubmissions%2F%5Bcode%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsubmissions%2F%5Bcode%5D%2Froute.ts&appDir=C%3A%5CUsers%5C3FARMATE%20ROBOTICS%5CDownloads%5CESP-Drone-main%5CESP-Drone-main%5CFirmware%5Cesp-drone%5Cdrone-programming-platform%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C3FARMATE%20ROBOTICS%5CDownloads%5CESP-Drone-main%5CESP-Drone-main%5CFirmware%5Cesp-drone%5Cdrone-programming-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsubmissions%2F%5Bcode%5D%2Froute&page=%2Fapi%2Fsubmissions%2F%5Bcode%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsubmissions%2F%5Bcode%5D%2Froute.ts&appDir=C%3A%5CUsers%5C3FARMATE%20ROBOTICS%5CDownloads%5CESP-Drone-main%5CESP-Drone-main%5CFirmware%5Cesp-drone%5Cdrone-programming-platform%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C3FARMATE%20ROBOTICS%5CDownloads%5CESP-Drone-main%5CESP-Drone-main%5CFirmware%5Cesp-drone%5Cdrone-programming-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_3FARMATE_ROBOTICS_Downloads_ESP_Drone_main_ESP_Drone_main_Firmware_esp_drone_drone_programming_platform_app_api_submissions_code_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/submissions/[code]/route.ts */ \"(rsc)/./app/api/submissions/[code]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/submissions/[code]/route\",\n        pathname: \"/api/submissions/[code]\",\n        filename: \"route\",\n        bundlePath: \"app/api/submissions/[code]/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\3FARMATE ROBOTICS\\\\Downloads\\\\ESP-Drone-main\\\\ESP-Drone-main\\\\Firmware\\\\esp-drone\\\\drone-programming-platform\\\\app\\\\api\\\\submissions\\\\[code]\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_3FARMATE_ROBOTICS_Downloads_ESP_Drone_main_ESP_Drone_main_Firmware_esp_drone_drone_programming_platform_app_api_submissions_code_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/submissions/[code]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzdWJtaXNzaW9ucyUyRiU1QmNvZGUlNUQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnN1Ym1pc3Npb25zJTJGJTVCY29kZSU1RCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnN1Ym1pc3Npb25zJTJGJTVCY29kZSU1RCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUMzRkFSTUFURSUyMFJPQk9USUNTJTVDRG93bmxvYWRzJTVDRVNQLURyb25lLW1haW4lNUNFU1AtRHJvbmUtbWFpbiU1Q0Zpcm13YXJlJTVDZXNwLWRyb25lJTVDZHJvbmUtcHJvZ3JhbW1pbmctcGxhdGZvcm0lNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1QzNGQVJNQVRFJTIwUk9CT1RJQ1MlNUNEb3dubG9hZHMlNUNFU1AtRHJvbmUtbWFpbiU1Q0VTUC1Ecm9uZS1tYWluJTVDRmlybXdhcmUlNUNlc3AtZHJvbmUlNUNkcm9uZS1wcm9ncmFtbWluZy1wbGF0Zm9ybSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNpSDtBQUM5TDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2Ryb25lLXByb2dyYW1taW5nLXBsYXRmb3JtLz9iODk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXDNGQVJNQVRFIFJPQk9USUNTXFxcXERvd25sb2Fkc1xcXFxFU1AtRHJvbmUtbWFpblxcXFxFU1AtRHJvbmUtbWFpblxcXFxGaXJtd2FyZVxcXFxlc3AtZHJvbmVcXFxcZHJvbmUtcHJvZ3JhbW1pbmctcGxhdGZvcm1cXFxcYXBwXFxcXGFwaVxcXFxzdWJtaXNzaW9uc1xcXFxbY29kZV1cXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3N1Ym1pc3Npb25zL1tjb2RlXS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3N1Ym1pc3Npb25zL1tjb2RlXVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvc3VibWlzc2lvbnMvW2NvZGVdL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcM0ZBUk1BVEUgUk9CT1RJQ1NcXFxcRG93bmxvYWRzXFxcXEVTUC1Ecm9uZS1tYWluXFxcXEVTUC1Ecm9uZS1tYWluXFxcXEZpcm13YXJlXFxcXGVzcC1kcm9uZVxcXFxkcm9uZS1wcm9ncmFtbWluZy1wbGF0Zm9ybVxcXFxhcHBcXFxcYXBpXFxcXHN1Ym1pc3Npb25zXFxcXFtjb2RlXVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9zdWJtaXNzaW9ucy9bY29kZV0vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsubmissions%2F%5Bcode%5D%2Froute&page=%2Fapi%2Fsubmissions%2F%5Bcode%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsubmissions%2F%5Bcode%5D%2Froute.ts&appDir=C%3A%5CUsers%5C3FARMATE%20ROBOTICS%5CDownloads%5CESP-Drone-main%5CESP-Drone-main%5CFirmware%5Cesp-drone%5Cdrone-programming-platform%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C3FARMATE%20ROBOTICS%5CDownloads%5CESP-Drone-main%5CESP-Drone-main%5CFirmware%5Cesp-drone%5Cdrone-programming-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/submissions/[code]/route.ts":
/*!*********************************************!*\
  !*** ./app/api/submissions/[code]/route.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase/server */ \"(rsc)/./lib/supabase/server.ts\");\n/* harmony import */ var _lib_grading__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/grading */ \"(rsc)/./lib/grading.ts\");\n\n\n\nconst STUDENT_HEADER = \"x-student-id\";\n// POST: Submit code for a mission (student)\nasync function POST(req, { params }) {\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createServerSupabaseClient)();\n    const code = params && params.code || \"\";\n    const studentId = req.headers.get(STUDENT_HEADER) || `anon-${Date.now()}-${Math.random()}`;\n    try {\n        const { data: userData } = await supabase.auth.getUser();\n        const userId = userData?.user?.id || null;\n        const body = await req.json();\n        const missionId = body.missionId || \"\";\n        const studentCode = body.code || \"\";\n        const flightData = body.flightData || null;\n        if (!missionId || !studentCode) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"missionId and code required\"\n            }, {\n                status: 400\n            });\n        }\n        // Find assignment by code\n        const { data: assignment, error: assignmentError } = await supabase.from(\"assignments\").select(\"*\").eq(\"code\", code).single();\n        if (assignmentError || !assignment) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Assignment not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Verify mission is in assignment\n        if (!assignment.missions.includes(missionId)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Mission not in this assignment\"\n            }, {\n                status: 400\n            });\n        }\n        // Call grading engine\n        const gradeResult = (0,_lib_grading__WEBPACK_IMPORTED_MODULE_2__.gradeMission)(missionId, studentCode, flightData);\n        const feedbackStr = Array.isArray(gradeResult.feedback) ? gradeResult.feedback.join(\" \") : gradeResult.feedback;\n        // Create submission record\n        const { data: submission, error: subError } = await supabase.from(\"submissions\").insert({\n            assignment_id: assignment.id,\n            user_id: userId,\n            student_id: studentId,\n            mission_id: missionId,\n            code: studentCode,\n            flight_data: flightData\n        }).select().single();\n        if (subError) throw subError;\n        // Create grade record\n        const { data: grade, error: gradeError } = await supabase.from(\"grades\").insert({\n            submission_id: submission.id,\n            score: gradeResult.score,\n            passed: gradeResult.passed,\n            feedback: feedbackStr,\n            breakdown: gradeResult.breakdown || {}\n        }).select().single();\n        if (gradeError) throw gradeError;\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            submission: {\n                id: submission.id,\n                studentId: submission.student_id,\n                missionId: submission.mission_id,\n                createdAt: submission.created_at\n            },\n            grade: {\n                score: grade.score,\n                passed: grade.passed,\n                feedback: grade.feedback,\n                breakdown: grade.breakdown\n            }\n        }, {\n            status: 201\n        });\n    } catch (err) {\n        console.error(\"Submission error:\", err);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Invalid request\"\n        }, {\n            status: 400\n        });\n    }\n}\n// GET: Retrieve submission results (includes student name and submitted code)\nasync function GET(_req, { params }) {\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createServerSupabaseClient)();\n    const code = params && params.code || \"\";\n    const { data: assignment, error: assignmentError } = await supabase.from(\"assignments\").select(`\r\n      *,\r\n      submissions (\r\n        *,\r\n        grades (*)\r\n      )\r\n    `).eq(\"code\", code).single();\n    if (assignmentError || !assignment) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Assignment not found\"\n        }, {\n            status: 404\n        });\n    }\n    // Collect unique user_ids to fetch profile names\n    const userIds = Array.from(new Set(assignment.submissions.map((s)=>s.user_id).filter((id)=>id !== null)));\n    // Fetch profile names for all submitting users\n    let profileMap = {};\n    if (userIds.length > 0) {\n        const { data: profiles } = await supabase.from(\"profiles\").select(\"id, full_name, username\").in(\"id\", userIds);\n        if (profiles) {\n            for (const p of profiles){\n                profileMap[p.id] = p.full_name || p.username || `Student ${p.id.slice(0, 8)}`;\n            }\n        }\n    }\n    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n        code: assignment.code,\n        title: assignment.title,\n        missions: assignment.missions,\n        submissions: assignment.submissions.map((s)=>({\n                id: s.id,\n                studentId: s.student_id,\n                userId: s.user_id,\n                studentName: s.user_id ? profileMap[s.user_id] || `Student ${s.student_id.slice(0, 8)}` : `Anonymous ${s.student_id.slice(0, 8)}`,\n                missionId: s.mission_id,\n                code: s.code,\n                createdAt: s.created_at,\n                grade: s.grades && s.grades.length > 0 ? {\n                    score: s.grades[0].score,\n                    passed: s.grades[0].passed,\n                    feedback: s.grades[0].feedback,\n                    breakdown: s.grades[0].breakdown\n                } : null\n            }))\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3N1Ym1pc3Npb25zL1tjb2RlXS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF1RDtBQUNXO0FBQ3RCO0FBRTVDLE1BQU1HLGlCQUFpQjtBQUV2Qiw0Q0FBNEM7QUFDckMsZUFBZUMsS0FBS0MsR0FBZ0IsRUFBRSxFQUFFQyxNQUFNLEVBQWdDO0lBQ25GLE1BQU1DLFdBQVdOLGdGQUEwQkE7SUFDM0MsTUFBTU8sT0FBTyxVQUFXRixPQUFPRSxJQUFJLElBQUs7SUFDeEMsTUFBTUMsWUFBWUosSUFBSUssT0FBTyxDQUFDQyxHQUFHLENBQUNSLG1CQUFtQixDQUFDLEtBQUssRUFBRVMsS0FBS0MsR0FBRyxHQUFHLENBQUMsRUFBRUMsS0FBS0MsTUFBTSxHQUFHLENBQUM7SUFFMUYsSUFBSTtRQUNGLE1BQU0sRUFBRUMsTUFBTUMsUUFBUSxFQUFFLEdBQUcsTUFBTVYsU0FBU1csSUFBSSxDQUFDQyxPQUFPO1FBQ3RELE1BQU1DLFNBQVNILFVBQVVJLE1BQU1DLE1BQU07UUFFckMsTUFBTUMsT0FBTyxNQUFNbEIsSUFBSW1CLElBQUk7UUFDM0IsTUFBTUMsWUFBWUYsS0FBS0UsU0FBUyxJQUFJO1FBQ3BDLE1BQU1DLGNBQWNILEtBQUtmLElBQUksSUFBSTtRQUNqQyxNQUFNbUIsYUFBYUosS0FBS0ksVUFBVSxJQUFJO1FBRXRDLElBQUksQ0FBQ0YsYUFBYSxDQUFDQyxhQUFhO1lBQzlCLE9BQU8xQixrRkFBWUEsQ0FBQ3dCLElBQUksQ0FDdEI7Z0JBQUVJLE9BQU87WUFBOEIsR0FDdkM7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDBCQUEwQjtRQUMxQixNQUFNLEVBQUViLE1BQU1jLFVBQVUsRUFBRUYsT0FBT0csZUFBZSxFQUFFLEdBQUcsTUFBTXhCLFNBQ3hEeUIsSUFBSSxDQUFDLGVBQ0xDLE1BQU0sQ0FBQyxLQUNQQyxFQUFFLENBQUMsUUFBUTFCLE1BQ1gyQixNQUFNO1FBRVQsSUFBSUosbUJBQW1CLENBQUNELFlB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Q0FBQzRCLEtBQUssQ0FBQyxHQUFHLEdBQUcsQ0FBQztnQkFDbklwRCxXQUFXMkMsRUFBRWxCLFVBQVU7Z0JBQ3ZCMUMsTUFBTTRELEVBQUU1RCxJQUFJO2dCQUNaa0QsV0FBV1UsRUFBRVQsVUFBVTtnQkFDdkJQLE9BQU9nQixFQUFFWSxNQUFNLElBQUlaLEVBQUVZLE1BQU0sQ0FBQ1QsTUFBTSxHQUFHLElBQ2pDO29CQUNBaEIsT0FBT2EsRUFBRVksTUFBTSxDQUFDLEVBQUUsQ0FBQ3pCLEtBQUs7b0JBQ3hCQyxRQUFRWSxFQUFFWSxNQUFNLENBQUMsRUFBRSxDQUFDeEIsTUFBTTtvQkFDMUJkLFVBQVUwQixFQUFFWSxNQUFNLENBQUMsRUFBRSxDQUFDdEMsUUFBUTtvQkFDOUJlLFdBQVdXLEVBQUVZLE1BQU0sQ0FBQyxFQUFFLENBQUN2QixTQUFTO2dCQUNsQyxJQUNFO1lBQ047SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJvbmUtcHJvZ3JhbW1pbmctcGxhdGZvcm0vLi9hcHAvYXBpL3N1Ym1pc3Npb25zL1tjb2RlXS9yb3V0ZS50cz9iZTk1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcclxuaW1wb3J0IHsgY3JlYXRlU2VydmVyU3VwYWJhc2VDbGllbnQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZS9zZXJ2ZXInXHJcbmltcG9ydCB7IGdyYWRlTWlzc2lvbiB9IGZyb20gJ0AvbGliL2dyYWRpbmcnXHJcblxyXG5jb25zdCBTVFVERU5UX0hFQURFUiA9ICd4LXN0dWRlbnQtaWQnXHJcblxyXG4vLyBQT1NUOiBTdWJtaXQgY29kZSBmb3IgYSBtaXNzaW9uIChzdHVkZW50KVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0LCB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBjb2RlOiBzdHJpbmcgfSB9KSB7XHJcbiAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVTZXJ2ZXJTdXBhYmFzZUNsaWVudCgpXHJcbiAgY29uc3QgY29kZSA9IChwYXJhbXMgJiYgcGFyYW1zLmNvZGUpIHx8ICcnXHJcbiAgY29uc3Qgc3R1ZGVudElkID0gcmVxLmhlYWRlcnMuZ2V0KFNUVURFTlRfSEVBREVSKSB8fCBgYW5vbi0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKX1gXHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGE6IHVzZXJEYXRhIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKVxyXG4gICAgY29uc3QgdXNlcklkID0gdXNlckRhdGE/LnVzZXI/LmlkIHx8IG51bGxcclxuXHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKVxyXG4gICAgY29uc3QgbWlzc2lvbklkID0gYm9keS5taXNzaW9uSWQgfHwgJydcclxuICAgIGNvbnN0IHN0dWRlbnRDb2RlID0gYm9keS5jb2RlIHx8ICcnXHJcbiAgICBjb25zdCBmbGlnaHREYXRhID0gYm9keS5mbGlnaHREYXRhIHx8IG51bGxcclxuXHJcbiAgICBpZiAoIW1pc3Npb25JZCB8fCAhc3R1ZGVudENvZGUpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdtaXNzaW9uSWQgYW5kIGNvZGUgcmVxdWlyZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyBGaW5kIGFzc2lnbm1lbnQgYnkgY29kZVxyXG4gICAgY29uc3QgeyBkYXRhOiBhc3NpZ25tZW50LCBlcnJvcjogYXNzaWdubWVudEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnYXNzaWdubWVudHMnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLmVxKCdjb2RlJywgY29kZSlcclxuICAgICAgLnNpbmdsZSgpXHJcblxyXG4gICAgaWYgKGFzc2lnbm1lbnRFcnJvciB8fCAhYXNzaWdubWVudCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0Fzc2lnbm1lbnQgbm90IGZvdW5kJyB9LCB7IHN0YXR1czogNDA0IH0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmVyaWZ5IG1pc3Npb24gaXMgaW4gYXNzaWdubWVudFxyXG4gICAgaWYgKCFhc3NpZ25tZW50Lm1pc3Npb25zLmluY2x1ZGVzKG1pc3Npb25JZCkpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdNaXNzaW9uIG5vdCBpbiB0aGlzIGFzc2lnbm1lbnQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyBDYWxsIGdyYWRpbmcgZW5naW5lXHJcbiAgICBjb25zdCBncmFkZVJlc3VsdCA9IGdyYWRlTWlzc2lvbihtaXNzaW9uSWQsIHN0dWRlbnRDb2RlLCBmbGlnaHREYXRhKVxyXG4gICAgY29uc3QgZmVlZGJhY2tTdHIgPSBBcnJheS5pc0FycmF5KGdyYWRlUmVzdWx0LmZlZWRiYWNrKSA/IGdyYWRlUmVzdWx0LmZlZWRiYWNrLmpvaW4oJyAnKSA6IGdyYWRlUmVzdWx0LmZlZWRiYWNrXHJcblxyXG4gICAgLy8gQ3JlYXRlIHN1Ym1pc3Npb24gcmVjb3JkXHJcbiAgICBjb25zdCB7IGRhdGE6IHN1Ym1pc3Npb24sIGVycm9yOiBzdWJFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3N1Ym1pc3Npb25zJylcclxuICAgICAgLmluc2VydCh7XHJcbiAgICAgICAgYXNzaWdubWVudF9pZDogYXNzaWdubWVudC5pZCxcclxuICAgICAgICB1c2VyX2lkOiB1c2VySWQsXHJcbiAgICAgICAgc3R1ZGVudF9pZDogc3R1ZGVudElkLFxyXG4gICAgICAgIG1pc3Npb25faWQ6IG1pc3Npb25JZCxcclxuICAgICAgICBjb2RlOiBzdHVkZW50Q29kZSxcclxuICAgICAgICBmbGlnaHRfZGF0YTogZmxpZ2h0RGF0YSxcclxuICAgICAgfSlcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKVxyXG5cclxuICAgIGlmIChzdWJFcnJvcikgdGhyb3cgc3ViRXJyb3JcclxuXHJcbiAgICAvLyBDcmVhdGUgZ3JhZGUgcmVjb3JkXHJcbiAgICBjb25zdCB7IGRhdGE6IGdyYWRlLCBlcnJvcjogZ3JhZGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2dyYWRlcycpXHJcbiAgICAgIC5pbnNlcnQoe1xyXG4gICAgICAgIHN1Ym1pc3Npb25faWQ6IHN1Ym1pc3Npb24uaWQsXHJcbiAgICAgICAgc2NvcmU6IGdyYWRlUmVzdWx0LnNjb3JlLFxyXG4gICAgICAgIHBhc3NlZDogZ3JhZGVSZXN1bHQucGFzc2VkLFxyXG4gICAgICAgIGZlZWRiYWNrOiBmZWVkYmFja1N0cixcclxuICAgICAgICBicmVha2Rvd246IGdyYWRlUmVzdWx0LmJyZWFrZG93biB8fCB7fSxcclxuICAgICAgfSlcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKVxyXG5cclxuICAgIGlmIChncmFkZUVycm9yKSB0aHJvdyBncmFkZUVycm9yXHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7XHJcbiAgICAgICAgc3VibWlzc2lvbjoge1xyXG4gICAgICAgICAgaWQ6IHN1Ym1pc3Npb24uaWQsXHJcbiAgICAgICAgICBzdHVkZW50SWQ6IHN1Ym1pc3Npb24uc3R1ZGVudF9pZCxcclxuICAgICAgICAgIG1pc3Npb25JZDogc3VibWlzc2lvbi5taXNzaW9uX2lkLFxyXG4gICAgICAgICAgY3JlYXRlZEF0OiBzdWJtaXNzaW9uLmNyZWF0ZWRfYXQsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBncmFkZToge1xyXG4gICAgICAgICAgc2NvcmU6IGdyYWRlLnNjb3JlLFxyXG4gICAgICAgICAgcGFzc2VkOiBncmFkZS5wYXNzZWQsXHJcbiAgICAgICAgICBmZWVkYmFjazogZ3JhZGUuZmVlZGJhY2ssXHJcbiAgICAgICAgICBicmVha2Rvd246IGdyYWRlLmJyZWFrZG93bixcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICB7IHN0YXR1czogMjAxIH1cclxuICAgIClcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1N1Ym1pc3Npb24gZXJyb3I6JywgZXJyKVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHJlcXVlc3QnIH0sIHsgc3RhdHVzOiA0MDAgfSlcclxuICB9XHJcbn1cclxuXHJcbi8vIEdFVDogUmV0cmlldmUgc3VibWlzc2lvbiByZXN1bHRzIChpbmNsdWRlcyBzdHVkZW50IG5hbWUgYW5kIHN1Ym1pdHRlZCBjb2RlKVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKF9yZXE6IE5leHRSZXF1ZXN0LCB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBjb2RlOiBzdHJpbmcgfSB9KSB7XHJcbiAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVTZXJ2ZXJTdXBhYmFzZUNsaWVudCgpXHJcbiAgY29uc3QgY29kZSA9IChwYXJhbXMgJiYgcGFyYW1zLmNvZGUpIHx8ICcnXHJcblxyXG4gIGNvbnN0IHsgZGF0YTogYXNzaWdubWVudCwgZXJyb3I6IGFzc2lnbm1lbnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdhc3NpZ25tZW50cycpXHJcbiAgICAuc2VsZWN0KGBcclxuICAgICAgKixcclxuICAgICAgc3VibWlzc2lvbnMgKFxyXG4gICAgICAgICosXHJcbiAgICAgICAgZ3JhZGVzICgqKVxyXG4gICAgICApXHJcbiAgICBgKVxyXG4gICAgLmVxKCdjb2RlJywgY29kZSlcclxuICAgIC5zaW5nbGUoKVxyXG5cclxuICBpZiAoYXNzaWdubWVudEVycm9yIHx8ICFhc3NpZ25tZW50KSB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0Fzc2lnbm1lbnQgbm90IGZvdW5kJyB9LCB7IHN0YXR1czogNDA0IH0pXHJcbiAgfVxyXG5cclxuICAvLyBDb2xsZWN0IHVuaXF1ZSB1c2VyX2lkcyB0byBmZXRjaCBwcm9maWxlIG5hbWVzXHJcbiAgY29uc3QgdXNlcklkcyA9IEFycmF5LmZyb20oXHJcbiAgICBuZXcgU2V0KFxyXG4gICAgICBhc3NpZ25tZW50LnN1Ym1pc3Npb25zXHJcbiAgICAgICAgLm1hcCgoczogYW55KSA9PiBzLnVzZXJfaWQpXHJcbiAgICAgICAgLmZpbHRlcigoaWQ6IHN0cmluZyB8IG51bGwpID0+IGlkICE9PSBudWxsKVxyXG4gICAgKVxyXG4gICkgYXMgc3RyaW5nW11cclxuXHJcbiAgLy8gRmV0Y2ggcHJvZmlsZSBuYW1lcyBmb3IgYWxsIHN1Ym1pdHRpbmcgdXNlcnNcclxuICBsZXQgcHJvZmlsZU1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9XHJcbiAgaWYgKHVzZXJJZHMubGVuZ3RoID4gMCkge1xyXG4gICAgY29uc3QgeyBkYXRhOiBwcm9maWxlcyB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgLnNlbGVjdCgnaWQsIGZ1bGxfbmFtZSwgdXNlcm5hbWUnKVxyXG4gICAgICAuaW4oJ2lkJywgdXNlcklkcylcclxuXHJcbiAgICBpZiAocHJvZmlsZXMpIHtcclxuICAgICAgZm9yIChjb25zdCBwIG9mIHByb2ZpbGVzKSB7XHJcbiAgICAgICAgcHJvZmlsZU1hcFtwLmlkXSA9IHAuZnVsbF9uYW1lIHx8IHAudXNlcm5hbWUgfHwgYFN0dWRlbnQgJHtwLmlkLnNsaWNlKDAsIDgpfWBcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgIGNvZGU6IGFzc2lnbm1lbnQuY29kZSxcclxuICAgIHRpdGxlOiBhc3NpZ25tZW50LnRpdGxlLFxyXG4gICAgbWlzc2lvbnM6IGFzc2lnbm1lbnQubWlzc2lvbnMsXHJcbiAgICBzdWJtaXNzaW9uczogYXNzaWdubWVudC5zdWJtaXNzaW9ucy5tYXAoKHM6IGFueSkgPT4gKHtcclxuICAgICAgaWQ6IHMuaWQsXHJcbiAgICAgIHN0dWRlbnRJZDogcy5zdHVkZW50X2lkLFxyXG4gICAgICB1c2VySWQ6IHMudXNlcl9pZCxcclxuICAgICAgc3R1ZGVudE5hbWU6IHMudXNlcl9pZCA/IChwcm9maWxlTWFwW3MudXNlcl9pZF0gfHwgYFN0dWRlbnQgJHtzLnN0dWRlbnRfaWQuc2xpY2UoMCwgOCl9YCkgOiBgQW5vbnltb3VzICR7cy5zdHVkZW50X2lkLnNsaWNlKDAsIDgpfWAsXHJcbiAgICAgIG1pc3Npb25JZDogcy5taXNzaW9uX2lkLFxyXG4gICAgICBjb2RlOiBzLmNvZGUsXHJcbiAgICAgIGNyZWF0ZWRBdDogcy5jcmVhdGVkX2F0LFxyXG4gICAgICBncmFkZTogcy5ncmFkZXMgJiYgcy5ncmFkZXMubGVuZ3RoID4gMFxyXG4gICAgICAgID8ge1xyXG4gICAgICAgICAgc2NvcmU6IHMuZ3JhZGVzWzBdLnNjb3JlLFxyXG4gICAgICAgICAgcGFzc2VkOiBzLmdyYWRlc1swXS5wYXNzZWQsXHJcbiAgICAgICAgICBmZWVkYmFjazogcy5ncmFkZXNbMF0uZmVlZGJhY2ssXHJcbiAgICAgICAgICBicmVha2Rvd246IHMuZ3JhZGVzWzBdLmJyZWFrZG93bixcclxuICAgICAgICB9XHJcbiAgICAgICAgOiBudWxsLFxyXG4gICAgfSkpLFxyXG4gIH0pXHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNyZWF0ZVNlcnZlclN1cGFiYXNlQ2xpZW50IiwiZ3JhZGVNaXNzaW9uIiwiU1RVREVOVF9IRUFERVIiLCJQT1NUIiwicmVxIiwicGFyYW1zIiwic3VwYWJhc2UiLCJjb2RlIiwic3R1ZGVudElkIiwiaGVhZGVycyIsImdldCIsIkRhdGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwiZGF0YSIsInVzZXJEYXRhIiwiYXV0aCIsImdldFVzZXIiLCJ1c2VySWQiLCJ1c2VyIiwiaWQiLCJib2R5IiwianNvbiIsIm1pc3Npb25JZCIsInN0dWRlbnRDb2RlIiwiZmxpZ2h0RGF0YSIsImVycm9yIiwic3RhdHVzIiwiYXNzaWdubWVudCIsImFzc2lnbm1lbnRFcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsIm1pc3Npb25zIiwiaW5jbHVkZXMiLCJncmFkZVJlc3VsdCIsImZlZWRiYWNrU3RyIiwiQXJyYXkiLCJpc0FycmF5IiwiZmVlZGJhY2siLCJqb2luIiwic3VibWlzc2lvbiIsInN1YkVycm9yIiwiaW5zZXJ0IiwiYXNzaWdubWVudF9pZCIsInVzZXJfaWQiLCJzdHVkZW50X2lkIiwibWlzc2lvbl9pZCIsImZsaWdodF9kYXRhIiwiZ3JhZGUiLCJncmFkZUVycm9yIiwic3VibWlzc2lvbl9pZCIsInNjb3JlIiwicGFzc2VkIiwiYnJlYWtkb3duIiwiY3JlYXRlZEF0IiwiY3JlYXRlZF9hdCIsImVyciIsImNvbnNvbGUiLCJHRVQiLCJfcmVxIiwidXNlcklkcyIsIlNldCIsInN1Ym1pc3Npb25zIiwibWFwIiwicyIsImZpbHRlciIsInByb2ZpbGVNYXAiLCJsZW5ndGgiLCJwcm9maWxlcyIsImluIiwicCIsImZ1bGxfbmFtZSIsInVzZXJuYW1lIiwic2xpY2UiLCJ0aXRsZSIsInN0dWRlbnROYW1lIiwiZ3JhZGVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/submissions/[code]/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/grading.ts":
/*!************************!*\
  !*** ./lib/grading.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   gradeMission: () => (/* binding */ gradeMission)\n/* harmony export */ });\n/**\r\n * Basic grading engine for Phase‑2 MVP.\r\n * - Scores against simple mission success criteria\r\n * - Provides feedback and a numeric score (0-100)\r\n */ function gradeMission(missionId, userCode, flightData, criteria) {\n    const feedback = [];\n    let score = 0;\n    const breakdown = {};\n    // 1) Landing / required boolean criteria\n    if (criteria?.landed) {\n        const landed = !!flightData.landed;\n        if (landed) {\n            score += 30;\n            breakdown.landed = 30;\n        } else {\n            feedback.push(\"Drone did not land as required.\");\n            breakdown.landed = 0;\n        }\n    }\n    // 2) Altitude check\n    if (criteria?.minAltitude !== undefined) {\n        const reached = (flightData.maxAltitude || 0) >= criteria.minAltitude;\n        if (reached) {\n            score += 20;\n            breakdown.altitude = 20;\n        } else {\n            feedback.push(`Reach at least ${criteria.minAltitude}m altitude.`);\n            breakdown.altitude = 0;\n        }\n    }\n    // 3) Time / speed bonus\n    if (criteria?.maxTime !== undefined && flightData.time !== undefined) {\n        const within = flightData.time <= criteria.maxTime;\n        if (within) {\n            score += 15;\n            breakdown.time = 15;\n        } else {\n            feedback.push(`Try to complete the mission faster (target ${criteria.maxTime}s).`);\n            breakdown.time = 0;\n        }\n    }\n    // 4) Position accuracy: check final point distance to origin (0,0)\n    if (criteria?.positionAccuracy !== undefined && flightData.path && flightData.path.length > 0) {\n        const last = flightData.path[flightData.path.length - 1];\n        const dist = Math.sqrt(last.x * last.x + last.y * last.y);\n        const ok = dist <= (criteria.positionAccuracy || 0);\n        if (ok) {\n            score += 20;\n            breakdown.accuracy = 20;\n        } else {\n            feedback.push(`Final position off by ${dist.toFixed(2)}m (allowed ${criteria.positionAccuracy}m).`);\n            breakdown.accuracy = Math.max(0, 20 - Math.min(20, Math.round(dist / (criteria.positionAccuracy || 1) * 20)));\n        }\n    }\n    // 5) Code quality heuristics (loops / variables)\n    const usesLoop = /for\\s*\\(|for\\s+\\w+|while\\s*\\(/.test(userCode);\n    const usesVar = /\\bdef\\b|\\bvar\\b|\\breturn\\b|\\b=\\b/.test(userCode);\n    if (usesLoop) {\n        score += 10;\n        breakdown.loops = 10;\n    } else {\n        breakdown.loops = 0;\n    }\n    if (usesVar) {\n        score += 5;\n        breakdown.code = 5;\n    } else {\n        breakdown.code = 0;\n    }\n    // Cap score at 100\n    score = Math.min(100, score);\n    // Passed threshold\n    const passed = score >= 70;\n    if (passed) feedback.unshift(\"Mission passed — well done!\");\n    else feedback.unshift(\"Mission did not meet pass criteria. See hints.\");\n    return {\n        score,\n        passed,\n        feedback,\n        breakdown\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0lBQ25CO0lBRUEsbUJBQW1CO0lBQ25CL0IsUUFBUWlCLEtBQUtRLEdBQUcsQ0FBQyxLQUFLekI7SUFFdEIsbUJBQW1CO0lBQ25CLE1BQU1nQyxTQUFTaEMsU0FBUztJQUN4QixJQUFJZ0MsUUFBUWpDLFNBQVNrQyxPQUFPLENBQUM7U0FDeEJsQyxTQUFTa0MsT0FBTyxDQUFDO0lBRXRCLE9BQU87UUFBRWpDO1FBQU9nQztRQUFRakM7UUFBVUU7SUFBVTtBQUM5QyIsInNvdXJjZXMiOlsid2VicGFjazovL2Ryb25lLXByb2dyYW1taW5nLXBsYXRmb3JtLy4vbGliL2dyYWRpbmcudHM/MzZjYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdWNjZXNzQ3JpdGVyaWEgfSBmcm9tICdAL3R5cGVzL21pc3Npb24nXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEZsaWdodFBvaW50IHsgeDogbnVtYmVyOyB5OiBudW1iZXI7IHo6IG51bWJlciB9XHJcbmV4cG9ydCBpbnRlcmZhY2UgRmxpZ2h0RGF0YSB7XHJcbiAgcGF0aD86IEZsaWdodFBvaW50W11cclxuICB0aW1lPzogbnVtYmVyXHJcbiAgbWF4QWx0aXR1ZGU/OiBudW1iZXJcclxuICBsYW5kZWQ/OiBib29sZWFuXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgR3JhZGVSZXN1bHQge1xyXG4gIHNjb3JlOiBudW1iZXJcclxuICBwYXNzZWQ6IGJvb2xlYW5cclxuICBmZWVkYmFjazogc3RyaW5nW11cclxuICBicmVha2Rvd24/OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCYXNpYyBncmFkaW5nIGVuZ2luZSBmb3IgUGhhc2XigJEyIE1WUC5cclxuICogLSBTY29yZXMgYWdhaW5zdCBzaW1wbGUgbWlzc2lvbiBzdWNjZXNzIGNyaXRlcmlhXHJcbiAqIC0gUHJvdmlkZXMgZmVlZGJhY2sgYW5kIGEgbnVtZXJpYyBzY29yZSAoMC0xMDApXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ3JhZGVNaXNzaW9uKFxyXG4gIG1pc3Npb25JZDogc3RyaW5nLFxyXG4gIHVzZXJDb2RlOiBzdHJpbmcsXHJcbiAgZmxpZ2h0RGF0YTogRmxpZ2h0RGF0YSxcclxuICBjcml0ZXJpYT86IFN1Y2Nlc3NDcml0ZXJpYVxyXG4pOiBHcmFkZVJlc3VsdCB7XHJcbiAgY29uc3QgZmVlZGJhY2s6IHN0cmluZ1tdID0gW11cclxuICBsZXQgc2NvcmUgPSAwXHJcbiAgY29uc3QgYnJlYWtkb3duOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge31cclxuXHJcbiAgLy8gMSkgTGFuZGluZyAvIHJlcXVpcmVkIGJvb2xlYW4gY3JpdGVyaWFcclxuICBpZiAoY3JpdGVyaWE/LmxhbmRlZCkge1xyXG4gICAgY29uc3QgbGFuZGVkID0gISFmbGlnaHREYXRhLmxhbmRlZFxyXG4gICAgaWYgKGxhbmRlZCkge1xyXG4gICAgICBzY29yZSArPSAzMFxyXG4gICAgICBicmVha2Rvd24ubGFuZGVkID0gMzBcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZlZWRiYWNrLnB1c2goJ0Ryb25lIGRpZCBub3QgbGFuZCBhcyByZXF1aXJlZC4nKVxyXG4gICAgICBicmVha2Rvd24ubGFuZGVkID0gMFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gMikgQWx0aXR1ZGUgY2hlY2tcclxuICBpZiAoY3JpdGVyaWE/Lm1pbkFsdGl0dWRlICE9PSB1bmRlZmluZWQpIHtcclxuICAgIGNvbnN0IHJlYWNoZWQgPSAoZmxpZ2h0RGF0YS5tYXhBbHRpdHVkZSB8fCAwKSA+PSBjcml0ZXJpYS5taW5BbHRpdHVkZVxyXG4gICAgaWYgKHJlYWNoZWQpIHtcclxuICAgICAgc2NvcmUgKz0gMjBcclxuICAgICAgYnJlYWtkb3duLmFsdGl0dWRlID0gMjBcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZlZWRiYWNrLnB1c2goYFJlYWNoIGF0IGxlYXN0ICR7Y3JpdGVyaWEubWluQWx0aXR1ZGV9bSBhbHRpdHVkZS5gKVxyXG4gICAgICBicmVha2Rvd24uYWx0aXR1ZGUgPSAwXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyAzKSBUaW1lIC8gc3BlZWQgYm9udXNcclxuICBpZiAoY3JpdGVyaWE/Lm1heFRpbWUgIT09IHVuZGVmaW5lZCAmJiBmbGlnaHREYXRhLnRpbWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgY29uc3Qgd2l0aGluID0gZmxpZ2h0RGF0YS50aW1lIDw9IGNyaXRlcmlhLm1heFRpbWVcclxuICAgIGlmICh3aXRoaW4pIHtcclxuICAgICAgc2NvcmUgKz0gMTVcclxuICAgICAgYnJlYWtkb3duLnRpbWUgPSAxNVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZmVlZGJhY2sucHVzaChgVHJ5IHRvIGNvbXBsZXRlIHRoZSBtaXNzaW9uIGZhc3RlciAodGFyZ2V0ICR7Y3JpdGVyaWEubWF4VGltZX1zKS5gKVxyXG4gICAgICBicmVha2Rvd24udGltZSA9IDBcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIDQpIFBvc2l0aW9uIGFjY3VyYWN5OiBjaGVjayBmaW5hbCBwb2ludCBkaXN0YW5jZSB0byBvcmlnaW4gKDAsMClcclxuICBpZiAoY3JpdGVyaWE/LnBvc2l0aW9uQWNjdXJhY3kgIT09IHVuZGVmaW5lZCAmJiBmbGlnaHREYXRhLnBhdGggJiYgZmxpZ2h0RGF0YS5wYXRoLmxlbmd0aCA+IDApIHtcclxuICAgIGNvbnN0IGxhc3QgPSBmbGlnaHREYXRhLnBhdGhbZmxpZ2h0RGF0YS5wYXRoLmxlbmd0aCAtIDFdXHJcbiAgICBjb25zdCBkaXN0ID0gTWF0aC5zcXJ0KGxhc3QueCAqIGxhc3QueCArIGxhc3QueSAqIGxhc3QueSlcclxuICAgIGNvbnN0IG9rID0gZGlzdCA8PSAoY3JpdGVyaWEucG9zaXRpb25BY2N1cmFjeSB8fCAwKVxyXG4gICAgaWYgKG9rKSB7XHJcbiAgICAgIHNjb3JlICs9IDIwXHJcbiAgICAgIGJyZWFrZG93bi5hY2N1cmFjeSA9IDIwXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmZWVkYmFjay5wdXNoKGBGaW5hbCBwb3NpdGlvbiBvZmYgYnkgJHtkaXN0LnRvRml4ZWQoMil9bSAoYWxsb3dlZCAke2NyaXRlcmlhLnBvc2l0aW9uQWNjdXJhY3l9bSkuYClcclxuICAgICAgYnJlYWtkb3duLmFjY3VyYWN5ID0gTWF0aC5tYXgoMCwgMjAgLSBNYXRoLm1pbigyMCwgTWF0aC5yb3VuZCgoZGlzdCAvIChjcml0ZXJpYS5wb3NpdGlvbkFjY3VyYWN5IHx8IDEpKSAqIDIwKSkpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyA1KSBDb2RlIHF1YWxpdHkgaGV1cmlzdGljcyAobG9vcHMgLyB2YXJpYWJsZXMpXHJcbiAgY29uc3QgdXNlc0xvb3AgPSAvZm9yXFxzKlxcKHxmb3JcXHMrXFx3K3x3aGlsZVxccypcXCgvLnRlc3QodXNlckNvZGUpXHJcbiAgY29uc3QgdXNlc1ZhciA9IC9cXGJkZWZcXGJ8XFxidmFyXFxifFxcYnJldHVyblxcYnxcXGI9XFxiLy50ZXN0KHVzZXJDb2RlKVxyXG4gIGlmICh1c2VzTG9vcCkge1xyXG4gICAgc2NvcmUgKz0gMTBcclxuICAgIGJyZWFrZG93bi5sb29wcyA9IDEwXHJcbiAgfSBlbHNlIHtcclxuICAgIGJyZWFrZG93bi5sb29wcyA9IDBcclxuICB9XHJcbiAgaWYgKHVzZXNWYXIpIHtcclxuICAgIHNjb3JlICs9IDVcclxuICAgIGJyZWFrZG93bi5jb2RlID0gNVxyXG4gIH0gZWxzZSB7XHJcbiAgICBicmVha2Rvd24uY29kZSA9IDBcclxuICB9XHJcblxyXG4gIC8vIENhcCBzY29yZSBhdCAxMDBcclxuICBzY29yZSA9IE1hdGgubWluKDEwMCwgc2NvcmUpXHJcblxyXG4gIC8vIFBhc3NlZCB0aHJlc2hvbGRcclxuICBjb25zdCBwYXNzZWQgPSBzY29yZSA+PSA3MFxyXG4gIGlmIChwYXNzZWQpIGZlZWRiYWNrLnVuc2hpZnQoJ01pc3Npb24gcGFzc2VkIOKAlCB3ZWxsIGRvbmUhJylcclxuICBlbHNlIGZlZWRiYWNrLnVuc2hpZnQoJ01pc3Npb24gZGlkIG5vdCBtZWV0IHBhc3MgY3JpdGVyaWEuIFNlZSBoaW50cy4nKVxyXG5cclxuICByZXR1cm4geyBzY29yZSwgcGFzc2VkLCBmZWVkYmFjaywgYnJlYWtkb3duIH1cclxufVxyXG4iXSwibmFtZXMiOlsiZ3JhZGVNaXNzaW9uIiwibWlzc2lvbklkIiwidXNlckNvZGUiLCJmbGlnaHREYXRhIiwiY3JpdGVyaWEiLCJmZWVkYmFjayIsInNjb3JlIiwiYnJlYWtkb3duIiwibGFuZGVkIiwicHVzaCIsIm1pbkFsdGl0dWRlIiwidW5kZWZpbmVkIiwicmVhY2hlZCIsIm1heEFsdGl0dWRlIiwiYWx0aXR1ZGUiLCJtYXhUaW1lIiwidGltZSIsIndpdGhpbiIsInBvc2l0aW9uQWNjdXJhY3kiLCJwYXRoIiwibGVuZ3RoIiwibGFzdCIsImRpc3QiLCJNYXRoIiwic3FydCIsIngiLCJ5Iiwib2siLCJhY2N1cmFjeSIsInRvRml4ZWQiLCJtYXgiLCJtaW4iLCJyb3VuZCIsInVzZXNMb29wIiwidGVzdCIsInVzZXNWYXIiLCJsb29wcyIsImNvZGUiLCJwYXNzZWQiLCJ1bnNoaWZ0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/grading.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase/server.ts":
/*!********************************!*\
  !*** ./lib/supabase/server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAdminClient: () => (/* binding */ createAdminClient),\n/* harmony export */   createServerSupabaseClient: () => (/* binding */ createServerSupabaseClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n\n\n\n/**\r\n * Creates a Supabase client for use in Server Components, Server Actions, or Route Handlers.\r\n * It automatically handles cookie persistence.\r\n */ function createServerSupabaseClient() {\n    const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    const url = \"https://ntmginemkxkurawsabdi.supabase.co\";\n    const key = \"sb_publishable_RI5bB73WNkwcTpfaRR5Zlw_0rZxPXuW\";\n    if (!url || !key) {\n        throw new Error(\"Supabase URL or Anon Key is missing in server context.\");\n    }\n    return (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(url, key, {\n        cookies: {\n            get (name) {\n                return cookieStore.get(name)?.value;\n            },\n            set (name, value, options) {\n                try {\n                    cookieStore.set({\n                        name,\n                        value,\n                        ...options\n                    });\n                } catch (error) {\n                // This can happen if the client is used in a Server Component that is streaming\n                }\n            },\n            remove (name, options) {\n                try {\n                    cookieStore.set({\n                        name,\n                        value: \"\",\n                        ...options\n                    });\n                } catch (error) {\n                // This can happen if the client is used in a Server Component that is streaming\n                }\n            }\n        }\n    });\n}\n/**\r\n * Admin client for bypasssing RLS. USE WITH EXTREME CAUTION and ONLY on the server.\r\n * This should only be used in specific backend logic (e.g. initial profile creation).\r\n */ function createAdminClient() {\n    const url = \"https://ntmginemkxkurawsabdi.supabase.co\";\n    const key = process.env.SUPABASE_SERVICE_ROLE_KEY;\n    if (!url || !key || key === \"your_service_role_key_here\") {\n        console.warn(\"SUPABASE_SERVICE_ROLE_KEY is missing or using placeholder. Admin operations will fail.\");\n        return null;\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(url, key);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Uvc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXNFO0FBQ2hDO0FBQ2M7QUFFcEQ7OztDQUdDLEdBQ00sU0FBU0c7SUFDWixNQUFNQyxjQUFjSCxxREFBT0E7SUFDM0IsTUFBTUksTUFBTUMsMENBQW9DO0lBQ2hELE1BQU1HLE1BQU1ILGdEQUF5QztJQUVyRCxJQUFJLENBQUNELE9BQU8sQ0FBQ0ksS0FBSztRQUNkLE1BQU0sSUFBSUUsTUFBTTtJQUNwQjtJQUVBLE9BQU9YLGlFQUFrQkEsQ0FBQ0ssS0FBS0ksS0FBSztRQUNoQ1IsU0FBUztZQUNMVyxLQUFJQyxJQUFZO2dCQUNaLE9BQU9ULFlBQVlRLEdBQUcsQ0FBQ0MsT0FBT0M7WUFDbEM7WUFDQUMsS0FBSUYsSUFBWSxFQUFFQyxLQUFhLEVBQUVFLE9BQXNCO2dCQUNuRCxJQUFJO29CQUNBWixZQUFZVyxHQUFHLENBQUM7d0JBQUVGO3dCQUFNQzt3QkFBTyxHQUFHRSxPQUFPO29CQUFDO2dCQUM5QyxFQUFFLE9BQU9DLE9BQU87Z0JBQ1osZ0ZBQWdGO2dCQUNwRjtZQUNKO1lBQ0FDLFFBQU9MLElBQVksRUFBRUcsT0FBc0I7Z0JBQ3ZDLElBQUk7b0JBQ0FaLFlBQVlXLEdBQUcsQ0FBQzt3QkFBRUY7d0JBQU1DLE9BQU87d0JBQUksR0FBR0UsT0FBTztvQkFBQztnQkFDbEQsRUFBRSxPQUFPQyxPQUFPO2dCQUNaLGdGQUFnRjtnQkFDcEY7WUFDSjtRQUNKO0lBQ0o7QUFDSjtBQUVBOzs7Q0FHQyxHQUNNLFNBQVNFO0lBQ1osTUFBTWQsTUFBTUMsMENBQW9DO0lBQ2hELE1BQU1HLE1BQU1ILFFBQVFDLEdBQUcsQ0FBQ2EseUJBQXlCO0lBRWpELElBQUksQ0FBQ2YsT0FBTyxDQUFDSSxPQUFPQSxRQUFRLDhCQUE4QjtRQUN0RFksUUFBUUMsSUFBSSxDQUFDO1FBQ2IsT0FBTztJQUNYO0lBRUEsT0FBT3BCLG1FQUFZQSxDQUFDRyxLQUFLSTtBQUM3QiIsInNvdXJjZXMiOlsid2VicGFjazovL2Ryb25lLXByb2dyYW1taW5nLXBsYXRmb3JtLy4vbGliL3N1cGFiYXNlL3NlcnZlci50cz82NjI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNlcnZlckNsaWVudCwgdHlwZSBDb29raWVPcHRpb25zIH0gZnJvbSAnQHN1cGFiYXNlL3NzcidcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycydcclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBTdXBhYmFzZSBjbGllbnQgZm9yIHVzZSBpbiBTZXJ2ZXIgQ29tcG9uZW50cywgU2VydmVyIEFjdGlvbnMsIG9yIFJvdXRlIEhhbmRsZXJzLlxyXG4gKiBJdCBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgY29va2llIHBlcnNpc3RlbmNlLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNlcnZlclN1cGFiYXNlQ2xpZW50KCkge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBjb29raWVzKClcclxuICAgIGNvbnN0IHVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTFxyXG4gICAgY29uc3Qga2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVlcclxuXHJcbiAgICBpZiAoIXVybCB8fCAha2V5KSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZSBVUkwgb3IgQW5vbiBLZXkgaXMgbWlzc2luZyBpbiBzZXJ2ZXIgY29udGV4dC4nKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjcmVhdGVTZXJ2ZXJDbGllbnQodXJsLCBrZXksIHtcclxuICAgICAgICBjb29raWVzOiB7XHJcbiAgICAgICAgICAgIGdldChuYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb29raWVTdG9yZS5nZXQobmFtZSk/LnZhbHVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldChuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIG9wdGlvbnM6IENvb2tpZU9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29va2llU3RvcmUuc2V0KHsgbmFtZSwgdmFsdWUsIC4uLm9wdGlvbnMgfSlcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBjbGllbnQgaXMgdXNlZCBpbiBhIFNlcnZlciBDb21wb25lbnQgdGhhdCBpcyBzdHJlYW1pbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVtb3ZlKG5hbWU6IHN0cmluZywgb3B0aW9uczogQ29va2llT3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb29raWVTdG9yZS5zZXQoeyBuYW1lLCB2YWx1ZTogJycsIC4uLm9wdGlvbnMgfSlcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBjbGllbnQgaXMgdXNlZCBpbiBhIFNlcnZlciBDb21wb25lbnQgdGhhdCBpcyBzdHJlYW1pbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgfSlcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkbWluIGNsaWVudCBmb3IgYnlwYXNzc2luZyBSTFMuIFVTRSBXSVRIIEVYVFJFTUUgQ0FVVElPTiBhbmQgT05MWSBvbiB0aGUgc2VydmVyLlxyXG4gKiBUaGlzIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gc3BlY2lmaWMgYmFja2VuZCBsb2dpYyAoZS5nLiBpbml0aWFsIHByb2ZpbGUgY3JlYXRpb24pLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFkbWluQ2xpZW50KCkge1xyXG4gICAgY29uc3QgdXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMXHJcbiAgICBjb25zdCBrZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZXHJcblxyXG4gICAgaWYgKCF1cmwgfHwgIWtleSB8fCBrZXkgPT09ICd5b3VyX3NlcnZpY2Vfcm9sZV9rZXlfaGVyZScpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1NVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgaXMgbWlzc2luZyBvciB1c2luZyBwbGFjZWhvbGRlci4gQWRtaW4gb3BlcmF0aW9ucyB3aWxsIGZhaWwuJylcclxuICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjcmVhdGVDbGllbnQodXJsLCBrZXkpXHJcbn1cclxuIl0sIm5hbWVzIjpbImNyZWF0ZVNlcnZlckNsaWVudCIsImNvb2tpZXMiLCJjcmVhdGVDbGllbnQiLCJjcmVhdGVTZXJ2ZXJTdXBhYmFzZUNsaWVudCIsImNvb2tpZVN0b3JlIiwidXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsImtleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiRXJyb3IiLCJnZXQiLCJuYW1lIiwidmFsdWUiLCJzZXQiLCJvcHRpb25zIiwiZXJyb3IiLCJyZW1vdmUiLCJjcmVhdGVBZG1pbkNsaWVudCIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJjb25zb2xlIiwid2FybiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase/server.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js","vendor-chunks/cookie"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsubmissions%2F%5Bcode%5D%2Froute&page=%2Fapi%2Fsubmissions%2F%5Bcode%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsubmissions%2F%5Bcode%5D%2Froute.ts&appDir=C%3A%5CUsers%5C3FARMATE%20ROBOTICS%5CDownloads%5CESP-Drone-main%5CESP-Drone-main%5CFirmware%5Cesp-drone%5Cdrone-programming-platform%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C3FARMATE%20ROBOTICS%5CDownloads%5CESP-Drone-main%5CESP-Drone-main%5CFirmware%5Cesp-drone%5Cdrone-programming-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();